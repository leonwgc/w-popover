"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),e=require("react-dom");function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=n(t),o=n(e);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;arguments.length>e;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t,e,n){return(e=l(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(){return f=Object.assign?Object.assign.bind():function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f.apply(this,arguments)}function s(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;i.length>r;r++)0>e.indexOf(n=i[r])&&(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;i.length>r;r++)0>e.indexOf(n=i[r])&&Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,l=[],a=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{if(!a&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);e>n;n++)r[n]=t[n];return r}var m=r.default.createElement("svg",f({viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},{width:"1em",height:"1em",fill:"currentColor"}),r.default.createElement("path",{d:"M240.512 180.181333l271.530667 271.488 271.530666-271.488a42.666667 42.666667 0 0 1 56.32-3.541333l4.010667 3.541333a42.666667 42.666667 0 0 1 0 60.330667l-271.530667 271.530667 271.530667 271.530666a42.666667 42.666667 0 0 1-56.32 63.872l-4.010667-3.541333-271.530666-271.530667-271.530667 271.530667-4.010667 3.541333a42.666667 42.666667 0 0 1-56.32-63.872l271.488-271.530666-271.488-271.530667a42.666667 42.666667 0 0 1 60.330667-60.330667z","p-id":"2884"})),v=function(t){return r.default.createElement("div",t,m)};function y(e){var n=t.useRef(e);return n.current=e,n}v.displayName="Close";var b=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=t.useRef(!1);t.useEffect((function(){if(r.current)return e();r.current=!0}),n)},g=function(t){var e,n=t.current;return n instanceof HTMLElement?e=n:n.current?e=n.current:"function"==typeof n&&(e=n()),e},h=function(t,e,n){if("object"===a(e)&&e)for(var r=0,o=Object.keys(e);o.length>r;r++){var i=o[r];t.style[i]=e[i]}else"string"==typeof e&&(t.classList.add(e),"string"==typeof n&&n&&t.classList.contains(n)&&t.classList.remove(n))},w=!("undefined"==typeof window||!window),O=!1;try{window&&window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){O={passive:!0}}}))}catch(t){}var x=w?t.useLayoutEffect:t.useEffect,E=x;function j(e,n,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:220,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=t.useState(n),a=d(l,2),c=a[0],f=a[1],s=y(e),p=t.useRef(0),m=y(r),v=y(o);return E((function(){var t=g(s);n&&t instanceof Element&&(h(t,m.current,v.current),f(!0),p.current=window.setTimeout((function(){h(t,v.current,m.current)}),u))}),[n,c,m,v,s,u]),b((function(){if(!n&&c){var t=g(s);p.current=window.setTimeout((function(){h(t,m.current,v.current),p.current=window.setTimeout((function(){f(!1)}),i)}),u)}}),[n]),t.useEffect((function(){return function(){p.current&&clearTimeout(p.current)}}),[]),c||n}var C=["children","visible","style","duration","hideOverflow"],k=r.default.forwardRef((function(e,n){var o=e.children,i=e.visible,l=e.style,a=e.duration,c=void 0===a?220:a,d=e.hideOverflow,p=void 0===d||d,m=s(e,C),v=t.useRef(null),y=t.useRef("");t.useImperativeHandle(n,(function(){return v.current}));var b=j((function(){return v.current}),i,{opacity:0},{opacity:.5},c);return t.useEffect((function(){return y.current=document.body.style.overflow,document.body.style.overflow=i&&p?"hidden":y.current,function(){document.body.style.overflow=y.current}}),[i,p]),b?r.default.createElement("div",f({ref:v},m,{style:u(u({},l),{},{opacity:0,background:"rgba(0, 0, 0)",zIndex:1e3,position:"fixed",left:0,top:0,bottom:0,right:0,width:"100%",touchAction:"none",display:b?"":"none",transition:"opacity ".concat(c,"ms ease-in-out")})}),o):null}));k.displayName="W-Mask";var S={bottom:"top",top:"bottom",left:"right",right:"left"},P=function(t){return S[t]};function T(e,n,r,o){var i=y(r),u=y(n),l=y(e),a=y(o);t.useEffect((function(){var t=function(t,e){return t?"function"==typeof t?t():t&&"current"in t?t.current:t:e}(l.current,window);if(null==t?void 0:t.addEventListener){var e=function(t){var e;return null===(e=i.current)||void 0===e?void 0:e.call(i,t)},n=u.current,r=a.current;return t.addEventListener(n,e,r),function(){t.removeEventListener(n,e,r)}}}),[])}var N=function(t){if(""+t!="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t},L=function(t){return function(t){return(D(t)?t.ownerDocument:t.document)||window.document}(t).documentElement},R=function(t){return N(t).getComputedStyle(t)},_=function(t){return t?(t.nodeName||"").toLowerCase():""},M=function(t){return t&&"html"!==_(t)?t.assignedSlot||t.parentNode||L(t):t},D=function(t){return t instanceof N(t).Element||t instanceof Element},I=function(t){return t instanceof N(t).HTMLElement||t instanceof HTMLElement},A=function(t){return["table","td","th"].indexOf(_(t))>=0},z=function(t){return I(t)&&"fixed"!==R(t).position?t.offsetParent:null},B=function(t,e){var n=N(t);null==e||e(t);for(var r=z(t);r&&A(r)&&"static"===R(r).position;)null==e||e(r),r=z(r);return r||function(t,e){null==e||e(t);for(var n=M(t);I(n)&&0>["html","body"].indexOf(_(n));){null==e||e(n);var r=R(n);if("none"!==r.transform||"none"!==r.perspective||r.willChange&&"auto"!==r.willChange)return n;n=M(n)}return n}(t,e)||n},F=function(t){var e=0;return B(t,(function(t){e+=t.offsetTop})),e},H=/scroll|auto|overlay/i;function V(t){return"HTML"!==t.tagName&&"BODY"!==t.tagName&&1===t.nodeType}function W(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=t;n&&n!==e&&V(n);){var r=window.getComputedStyle(n),o=r.overflowY;if(H.test(o))return n;n=n.parentNode}return e}var Y=["placement","content","arrow","visible","closable","onVisibleChange","onClose","className","style","children","mask","maskStyle","maskClass","closeOnClickOutside","closeOnMaskClick","transition","transitionDuration","transitionTimingFunction","offset"],q=x,U={opacity:0,transform:"scale(0)"},$={opacity:1,transform:"scale(1)"},G=function(e){var n=e.placement,i=void 0===n?"bottom":n,l=e.content,a=e.arrow,p=void 0===a||a,m=e.visible,g=e.closable,x=e.onVisibleChange,E=e.onClose,C=e.className,S=e.style,N=e.children,L=e.mask,M=e.maskStyle,D=e.maskClass,I=e.closeOnClickOutside,A=void 0===I||I,z=e.closeOnMaskClick,B=void 0===z||z,H=e.transition,V=void 0===H||H,G=e.transitionDuration,J=void 0===G?220:G,K=e.transitionTimingFunction,Q=void 0===K?"ease-in-out":K,X=e.offset,Z=void 0===X?{}:X,tt=s(e,Y),et=t.useRef(),nt=t.useRef(null),rt=y(Z),ot=y(E),it=d(t.useState({}),2),ut=it[0],lt=it[1],at=t.useRef(!1),ct=r.default.useCallback((function(t,e){var n=nt.current;h(n,{transitionProperty:"none",transform:"none"});var r=function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bottom",i=arguments.length>5?arguments[5]:void 0,u=t.getBoundingClientRect(),l=e.getBoundingClientRect(),a=n.getBoundingClientRect(),c="body"===_(n),f=R(e).position,s="fixed"===f,d=r instanceof Element?r.scrollTop:r.pageYOffset,p="fixed"===f||r instanceof Element,m=p?l.top:c?l.top+d:F(e),v=l.height+m,y=l.left-(p?0:a.left),b=l.width,g=l.height,h={x:i.x||0,y:i.y||0},w={top:{top:m-u.height-12,left:y+b/2-u.width/2},bottom:{top:v+12,left:y+b/2-u.width/2},left:{top:m+g/2-u.height/2,left:y-u.width-12},right:{top:m+g/2-u.height/2,left:y+b+12},"top-right":{top:m-u.height-12,left:y+b-u.width},"top-left":{top:m-u.height-12,left:y},"bottom-right":{top:v+12,left:y+b-u.width},"bottom-left":{top:v+12,left:y},"right-top":{top:m,left:y+b+12},"left-top":{top:m,left:y-u.width-12},"right-bottom":{top:v-u.height,left:y+b+12},"left-bottom":{top:v-u.height,left:y-u.width-12}}[o];return{position:s?"fixed":"absolute",top:w.top+h.y,left:w.left+h.x}}(n,t,document.body,e,i,rt.current),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,o=t.getBoundingClientRect(),i=d(e.split("-"),2),l=i[0],a=i[1],f=c({boxShadow:{top:"1px 1px 1px 0px rgba(0, 0, 0, 0.05)",right:"-1px 1px 1px 0px rgba(0, 0, 0, 0.05)",bottom:"-1px -1px 1px 0px rgba(0, 0, 0, 0.05)",left:"1px -1px 1px 0px rgba(0, 0, 0, 0.05)"}[l]},P(l),-r/2);if(a)return u(c({},a,2*n),f);var s={};return["bottom","top"].includes(l)&&(s.right=(o.width-r)/2),["left","right"].includes(l)&&(s.top=(o.height-r)/2),u(u({},s),f)}(n,i,12);h(n,{top:r.top+"px",left:r.left+"px",position:r.position}),V&&!at.current&&(at.current=!0,h(n,U),n.__prevent__minify__removed__=n.scrollTop,h(n,{transitionProperty:"transform, opacity"})),lt(o)}),[V,i,rt]),ft=function(){var t=et.current,e=W(t);ct(t,e)},st=t.useCallback((function(t){var e,n=nt.current,r=et.current;!n||n.contains(t.target)||r.contains(t.target)||(null===(e=ot.current)||void 0===e||e.call(ot))}),[ot]);T((function(){return window}),"resize",m?ft:void 0,O),T((function(){return W(et.current)}),"scroll",m?ft:void 0,O),T((function(){return document}),"click",A?st:void 0),q((function(){var t=et.current,e=W(t);m&&ct(t,e)}),[ct,m]);var dt=t.useMemo((function(){return function(t){var e=t.split("-"),n="";return e[0]&&(n+=P(e[0])),e[1]&&(n+=" "+e[1]),n}(i)}),[i]),pt=j((function(){return V?nt.current:null}),m,U,$,J);return b((function(){null==x||x(m),m||(at.current=!1)}),[m]),r.default.createElement(r.default.Fragment,null,r.default.createElement(k,{visible:L&&m,className:D,style:M,duration:J,onClick:function(){B&&(null==E||E())}}),r.default.cloneElement(N,{ref:et}),w&&o.default.createPortal(r.default.createElement(r.default.Fragment,null,(V&&pt||!V&&m)&&r.default.createElement("div",f({},tt,{ref:nt,className:"w-popover ".concat(C||""),style:u({position:"absolute",background:"#fff",zIndex:1e3,transformOrigin:dt,transitionTimingFunction:Q,transitionDuration:"".concat(J,"ms"),willChange:V?"transform, opacity":"unset"},S)}),p&&r.default.createElement("div",{className:"w-popover__arrow",style:u({position:"absolute",width:6,height:6,zIndex:-1,background:"inherit",transform:"rotate(45deg)"},ut)}),g&&r.default.createElement(v,{className:"w-popover__close",onClick:E,style:{position:"absolute",zIndex:10,top:6,right:6,cursor:"pointer",color:"rgb(0,0,0)",opacity:.35,display:"flex",alignItems:"center",justifyContent:"center"}}),l)),document.body))};G.displayName="W-Popover";var J=["hoverDelay","placement","arrow","offset","className","style","children"],K=function(e){var n=e.hoverDelay,o=void 0===n?100:n,i=e.placement,l=void 0===i?"top":i,a=e.arrow,c=void 0===a||a,p=e.offset,m=e.className,v=e.style,y=e.children,b=s(e,J),g=t.useRef(0),h=d(t.useState(!1),2),w=h[0],O=h[1],x={onMouseEnter:function(){g.current&&clearTimeout(g.current),O(!0)},onMouseLeave:function(){g.current=window.setTimeout((function(){O(!1)}),o)},onFocus:function(){g.current&&clearTimeout(g.current),O(!0)}};return r.default.createElement(G,f({},b,{className:"w-tooltip ".concat(m),style:u({background:"#333",color:"#fff",padding:"6px 12px"},v),visible:w,arrow:c,placement:l,offset:p},x),r.default.isValidElement(y)?r.default.cloneElement(y,u({},x)):r.default.createElement("span",x,y))};K.displayName="W-Tooltip",exports.Popover=G,exports.Tooltip=K,exports.default=G;
